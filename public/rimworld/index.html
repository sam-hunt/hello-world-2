<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repeaters</title>

    <link rel='stylesheet' type='text/css' media='screen' href='../styles.css'>
    <link rel='stylesheet' type='text/css' media='screen' href='./rimworld.css'>
    
    <!-- Leaflet -->
    <link rel="stylesheet" href="../lib/leaflet-1.6.0.css"/>
    <script src="../lib/leaflet-1.6.0.js"></script>
</head>
<body>
    <div id="leaflet-map-root"></div>
    <a id="back-button" onclick="window.history.back()">
        <svg style="position:fixed; width:32px; height:32px; left:50px; top:20px; z-index:400;" viewBox="0 0 24 24">
            <path stroke="black" d="M19,7V11H5.83L9.41,7.41L8,6L2,12L8,18L9.41,16.58L5.83,13H21V7H19Z" stroke-width="3" />
            <path stroke="white" d="M19,7V11H5.83L9.41,7.41L8,6L2,12L8,18L9.41,16.58L5.83,13H21V7H19Z" fill="white" />
        </svg>
    </a>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const colony = urlParams.get('colony');
        const x = parseFloat(urlParams.get('x')) || 0;
        const y = parseFloat(urlParams.get('y')) || 0;
        const z = parseFloat(urlParams.get('z')) || 1; // Zoom

        const map = L.map('leaflet-map-root', {
            crs: L.CRS.Simple,
            minZoom: 1,
            zoom: 3,
        });

        const tileLayer = L.tileLayer(`./${colony}/{z}/{x}/{y}.png`, {
            maxZoom: 6,
        }).addTo(map);

        map.setView([x, y], z);
    </script>
</body>
</html>